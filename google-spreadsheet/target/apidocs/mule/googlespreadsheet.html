
<!DOCTYPE html>
































































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <meta name="description" content="Documentation for Mule Cloud Connector." />

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico" />
<title>

  GoogleSpreadSheetModule


| Mule Cloud Connector

</title>
<link href="../assets/mule-developer-docs.css" rel="stylesheet" type="text/css" />
<link href="../assets/mule-developer-prettify.css" rel="stylesheet" type="text/css" />
<link href="../assets/customizations.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Ubuntu:300' rel='stylesheet' type='text/css'>
<script src="../assets/search_autocomplete.js" type="text/javascript"></script>
<script src="../assets/jquery-resizable.min.js" type="text/javascript"></script>
<script src="../assets/mule-developer-docs.js" type="text/javascript"></script>
<script src="../assets/prettify.js" type="text/javascript"></script>
<script type="text/javascript">
  setToRoot("../", "../assets/");
</script>
<script src="../assets/customizations.js" type="text/javascript"></script>
<noscript>
  <style type="text/css">
    html,body{overflow:auto;}
    #body-content{position:relative; top:0;}
    #doc-content{overflow:visible;border-left:3px solid #666;}
    #side-nav{padding:0;}
    #side-nav .toggle-list ul {display:block;}
    #resize-packages-nav{border-bottom:3px solid #666;}
  </style>
</noscript>
</head>

<body class="">

<div id="header">
    <div id="headerLeft">
    
      <span id="masthead-title">Mule Cloud Connector</span>
    
    <ul id="header-tabs" class="mule">
    
    	<li id="guide"><a href="../guide/install.html">
	    	<span class="en">Install Guide</span>
    	</a></li>
    
    	<li id="java"><a href="../java/packages.html">
	    	<span class="en">Java API Reference</span>
    	</a></li>
    
    	<li id="mule"><a href="../mule/modules.html">
	    	<span class="en">Mule API Reference</span>
    	</a></li>
    
    </ul>
    </div>
    <div id="headerRight">
      <a href="http://www.mulesoft.com" tabindex="-1">
      <img src="../assets//images/mulesoft-logo-final.gif" alt="MuleSoft" border="0" id="mulesoftlogo"></a><br/>
      
  <div id="search" >
      <div id="searchForm">
          <form accept-charset="utf-8" class="gsc-search-box" 
                onsubmit="return submit_search()">
            <table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody>
                <tr>
                  <td class="gsc-input">
                    <input id="search_autocomplete" class="gsc-input" type="text" size="33" autocomplete="off"
                      title="search developer docs" name="q"
                      value="search developer docs"
                      onFocus="search_focus_changed(this, true)"
                      onBlur="search_focus_changed(this, false)"
                      onkeydown="return search_changed(event, true, '../')"
                      onkeyup="return search_changed(event, false, '../')" />
                  <div id="search_filtered_div" class="no-display">
                      <table id="search_filtered" cellspacing=0>
                      </table>
                  </div>
                  </td>
                  <td class="gsc-search-button">
                    <input type="submit" value="Search" title="search" id="search-button" class="gsc-search-button" />
                  </td>
                  <td class="gsc-clear-button">
                    <div title="clear results" class="gsc-clear-button">&nbsp;</div>
                  </td>
                </tr></tbody>
              </table>
          </form>
      </div><!-- searchForm -->
  </div><!-- search -->
      
    </div>
</div><!-- header -->


<div class="g-unit" id="all-content">

<div id="api-info-block">

<div class="sum-details-links">

Summary:
<a href="#lconfig">Configuration</a>

  &#124; <a href="#promethods">Message Processors</a>



</div><!-- end sum-details-links -->

<div class="api-level">
  


  
  

</div>
</div><!-- end api-info-block -->


<!-- ======== START OF MODULE DATA ======== -->

<div id="jd-header">
    org.mule.modules
<h1>mule-module-google-spreadsheet</h1>
    1.0

</div><!-- end header -->

<div id="naMessage"></div>

<div id="jd-content" class="api apilevel-">


<div class="jd-tagdata">
      <table class="jd-tagtable">
        <tbody><tr>
          <th>Namespace</th><td>http://www.mulesoft.org/schema/mule/googlespreadsheet</td>
        </tr><tr>
          <th>Schema Location</th><td>http://www.mulesoft.org/schema/mule/googlespreadsheet/1.0/mule-googlespreadsheet.xsd</td>
        </tr>
<tr>
          <th>Version</th><td>1.0</td>
        </tr>
<tr>
          <th>Minimum Mule Version</th><td>3.2</td>
        </tr>
    </tbody></table>
  </div>

<div class="jd-descr">


<h2>Module Overview</h2>
<p>Generic module</p>


</div><!-- jd-descr -->











<div class="jd-descr">


<h2>Summary</h2>

<!-- Config -->


<!-- =========== CONFIG SUMMARY =========== -->
<table id="lconfig" class="jd-sumtable"><tr><th colspan="12">Configuration</th></tr>
	 
    <tr class=" api apilevel-" >
        <td class="jd-linkcol" width="100%"><nobr>
        <span class="sympad"><a href="../mule/googlespreadsheet.html#config">&lt;googlespreadsheet:config&gt;</a></nobr>
        <div class="jd-descrdiv">Configure an instance of this module</div>
  </td></tr>
</table>




<!-- ========== MESSAGE PROCESSOR SUMMARY =========== -->
<table id="promethods" class="jd-sumtable"><tr><th colspan="12">Message Processors</th></tr>



	 
    <tr class="alt-color api apilevel-" >
        <td class="jd-linkcol" width="100%"><nobr>
        <span class="sympad"><a href="../mule/googlespreadsheet.html#list-documents">&lt;googlespreadsheet:list-documents&gt;</a></nobr>
        
        <div class="jd-descrdiv">lists first 100 documents

 <br/></div>
        
  </td></tr>



</table>








</div><!-- jd-descr (summary) -->



<!-- ========= CONFIGURATION DETAIL ======== -->
<A NAME="config"></A>
<h2>Configuration</h2>
<p>To use the this module within a flow the namespace to the module must be included. The resulting flow will look
similar to the following:</p>
<pre>
&lt;mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:googlespreadsheet="http://www.mulesoft.org/schema/mule/googlespreadsheet"
      xsi:schemaLocation="
               http://www.mulesoft.org/schema/mule/core
               http://www.mulesoft.org/schema/mule/core/current/mule.xsd
               http://www.mulesoft.org/schema/mule/googlespreadsheet
               http://www.mulesoft.org/schema/mule/googlespreadsheet/1.0/mule-googlespreadsheet.xsd"&gt;

      &lt;!-- here goes your flows and configuration elements --&gt;

&lt;/mule&gt;
</pre>
<p>This module is configured using the <i>config</i> element. This element must be placed outside of your flows and at
the root of your Mule application. You can create as many configurations as you deem necesary as long as each carries
its own name.</p>
<p>Each message processor, message source or transformer carries a <i>config-ref</i> attribute that allows the invoker to
specify which configuration to use.</p>
<table id="lconfig" class="jd-sumtable">
<tr><th colspan="12">Attributes</th></tr>
<tr><th>Type</th><th>Name</th><th>Default Value</th><th>Description</th></tr>
<td class="jd-typecol"><nobr>xs:string</nobr></td>
<td class="jd-linkcol"><nobr>name</nobr></td>
<td class="jd-descrcol"></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Give a name to this configuration so it can be later referenced.</td>

    
      <tr class=" api apilevel-" >
          <td class="jd-typecol"><nobr>
          xs:string</nobr></td>
          <td class="jd-linkcol"><nobr>consumerKey</nobr></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol" width="100%">The OAuth consumer key 
</td>
      </tr>
      
    
      <tr class="alt-color api apilevel-" >
          <td class="jd-typecol"><nobr>
          xs:string</nobr></td>
          <td class="jd-linkcol"><nobr>consumerSecret</nobr></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol" width="100%">The OAuth consumer secret 
</td>
      </tr>
      
    
      <tr class=" api apilevel-" >
          <td class="jd-typecol"><nobr>
          xs:string</nobr></td>
          <td class="jd-linkcol"><nobr>scope</nobr></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i></td>
      </tr>
      
    
</table>






<!-- ========= OAUTH DETAIL ======== -->
<h2>OAuth</h2>
<p>This connector uses OAuth as an authorization and authentication mechanism. All the message processors or sources that require the connector
to be authorized by the service provider will throw a NotAuthorizedException until the connector is authorized properly.</p>
<p>Authorizing the connector is a simple process of calling:</p>
<pre>
    &lt;googlespreadsheet:authorize/&gt;
</pre>
<p>The call to authorize message processor must be made from a message coming from an HTTP inbound endpoint as the authorize process will
reply with a redirect to the service provider. The following is an example of how to use it in a flow with an HTTP inbound endpoint:</p>
<pre>
    &lt;flow name="authorizationAndAuthenticationFlow"&gt;
    &lt;http:inbound-endpoint host="localhost" port="8080" path="oauth-authorize"/&gt;
    &lt;googlespreadsheet:authorize/&gt;
    &lt;/flow&gt;
</pre>
<p>If you hit that endpoint via a web-browser it will initiate the OAuth dance, redirecting the user to the service provider page
and creating a callback endpoint so the service provider can call us back once the user has been authenticated. Once the callback
gets called then the connector will switch to an authorized state and any message processor or source that requires authentication
can be called.</p>
<h3>Callback Customization</h3>
<p>As mentioned earlier once authorize gets called and before we redirect the user to the service provider we create a callback
endpoint. The callback endpoint will get called automatically by the service provider once the user is authenticated and he
grants authorization to the connector to access his private information.</p>
<p>The callback can be customized in the config element of the this connector as follows:</p>
<pre>
    &lt;googlespreadsheet:config&gt;
        &lt;googlespreadsheet:oauth-callback-config domain="${fullDomain}" localPort="${http.port}" remotePort="80"/&gt;
    &lt;/googlespreadsheet:config&gt;
</pre>
<p>The <i>oauth-callback-config</i> element can be used to customize the endpoint that gets created for the callback. It
features the following attributes:</p>
<table id="lconfig" class="jd-sumtable">
<tr><th colspan="12">OAuth Callback Config Attributes</th></tr>
<tr><th>Name</th><th>Description</th></tr>
<tr class="api" >
<td class="jd-linkcol"><nobr>domain</nobr></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>The domain portion of the callback URL. This is usually something like xxx.muleion.com if you are deploying to iON for example.</td>
</tr>
<tr class="api" >
<td class="jd-linkcol"><nobr>localPort</nobr></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>The local port number that the endpoint will listen on. Normally 80, in the case of Mule iON you can use the environment variable ${http.port}.</td>
</tr>
<tr class="api" >
<td class="jd-linkcol"><nobr>remotePort</nobr></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>This is the port number that we will tell the service provider we are listening on. It is usually the same as localPort but it is separated in case your deployment features port forwarding or a proxy.</td>
</tr>
</table>
<p class="caution">The example shown above is what the configuration would look like if your app would be deployed to iON.</p>
<h3>Saving and Restoring State</h3>
<p>Once the service providers hits the callback it will do so in way that state information it is also sent. This state information
is later used by the connector on each call made to the service provider to let him know that we have completed the authorization
and authentication process.<p>
<p>The state information is currently held in-memory but the connector offers hooks to save/restore this state. The ammount of information
that needs to be saved and/or restored varies between version of the OAuth specification. At the bare minimum for OAuth 1.0a that needs
to be the OAuth access token and OAuth access token secret.</p>
<p>The following is an example of how to log the access token and access token secret.<p>
<pre>
    &lt;googlespreadsheet:config&gt;
        &lt;googlespreadsheet:save-oauth-access-token&gt;
            &lt;logger level="INFO" message="Received access token #[header:INBOUND:OAuthAccessToken] and #[header:INBOUND:OAuthAccessTokenSecret]"/&gt;
        &lt;/googlespreadsheet:save-oauth-access-token&gt;
    &lt;/googlespreadsheet:config&gt;
</pre>
<p>The <i>save-oauth-access-token</i> is a message processor chain and you can add inside of it as many message processors as you want. The chain will
be called with special inbound properties in the message which the information that needs saved.</p>
<p>Restoring the information is equally simple:</p>
<pre>
    &lt;googlespreadsheet:config&gt;
        &lt;googlespreadsheet:restore-oauth-access-token&gt;
            &lt;message-properties-transformer&gt;
                &lt;add-message-property key="OAuthAccessToken" value="123"/&gt;
                &lt;add-message-property key="OAuthAccessTokenSecret" value="567"/&gt;
            &lt;/message-properties-transformer&gt;
        &lt;/googlespreadsheet:restore-oauth-access-token&gt;
    &lt;/googlespreadsheet:config&gt;
</pre>
<p>The example above does not do anything useful expect hardcode the access token and the token secret to 123 and 567 respectively. Just like
<i>save-oauth-access-token</i>, <i>restore-oauth-access-token</i> is another message processor chain. Once the chain is done executing
we will extract the OAuth access token property and OAuth access token secret property values.</p>
<p>The following shows a full example on how to save and restore using Mule ObjectStore Module to store the information inside an object store.<p>
<pre>
&lt;mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:googlespreadsheet="http://www.mulesoft.org/schema/mule/googlespreadsheet"
      xmlns:objectstore="http://www.mulesoft.org/schema/mule/objectstore"
      xsi:schemaLocation="
               http://www.mulesoft.org/schema/mule/core
               http://www.mulesoft.org/schema/mule/core/current/mule.xsd
               http://www.mulesoft.org/schema/mule/objectstore
               http://www.mulesoft.org/schema/mule/objectstore/1.0/mule-objectstore.xsd
               http://www.mulesoft.org/schema/mule/googlespreadsheet
               http://www.mulesoft.org/schema/mule/googlespreadsheet/1.0/mule-googlespreadsheet.xsd"&gt;

    &lt;googlespreadsheet:config&gt;
        &lt;googlespreadsheet:save-oauth-access-token&gt;
            &lt;objectstore:store key="OAuthAccessToken" value="#[header:INBOUND:OAuthAccessToken]"/&gt;
            &lt;objectstore:store key="OAuthAccessTokenSecret" value="#[header:INBOUND:OAuthAccessTokenSecret]"/&gt;
        &lt;/googlespreadsheet:save-oauth-access-token&gt;
        &lt;googlespreadsheet:restore-oauth-access-token&gt;
            &lt;enricher target="#[header:OAuthAccessToken]"&gt;
                &lt;objectstore:retrieve key="OAuthAccessToken"/&gt;
            &lt;/enricher&gt;
            &lt;enricher target="#[header:OAuthAccessTokenSecret]"&gt;
                &lt;objectstore:retrieve key="OAuthAccessTokenSecret"/&gt;
            &lt;/enricher&gt;
        &lt;/googlespreadsheet:restore-oauth-access-token&gt;
    &lt;/googlespreadsheet:config&gt;

&lt;/mule&gt;
</pre>






<!-- ========= MESSAGE PROCESSOR DETAIL ======== -->
<!-- Message Processors -->

<h2>Message Processors</h2>



<A NAME="list-documents"></A>

<div class="jd-details api apilevel-">
    <h4 class="jd-details-title">
      <span class="sympad">&lt;googlespreadsheet:list-documents&gt;</span>
    </h4>
      <div class="api-level">
        <div>

</div>
      </div>
    <div class="jd-details-descr">
      
  <div class="jd-tagdata jd-tagdescr"><p>lists first 100 documents

 <div class="jd-tagdata"><h5 class="jd-tagtitle">XML Sample</h5><pre>INCLUDE_ERROR</pre></div></p></div>
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Attributes</h5>

        <table id="lconfig" class="jd-sumtable">
        <tr><th>Name</th><th>Default Value</th><th>Description</th></tr>
        <tr>
          <td class="jd-linkcol"><nobr>config-ref</nobr></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Specify which configuration to use.</td></tr>
          
          
                
                <tr class=" api apilevel-" >
                    <td class="jd-linkcol"><nobr>accessToken</nobr></td>
                    <td class="jd-descrcol"></td>
                    <td class="jd-descrcol" width="100%"></td>
                </tr>
                
                
          
                
                <tr class="alt-color api apilevel-" >
                    <td class="jd-linkcol"><nobr>secretToken</nobr></td>
                    <td class="jd-descrcol"></td>
                    <td class="jd-descrcol" width="100%"></td>
                </tr>
                
                
          
          
          
        </table>
  </div>
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Child Elements</h5>
        <table id="lconfig" class="jd-sumtable">
          
          
            
          
            
          
      </table>
  </div>
  
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Return Payload</h5>
      <ul class="nolist"><li>list of documents</li></ul>
  </div>
    
  
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Exception Payload</h5>
      <table class="jd-tagtable">
        <tr>
            <th></td>
            <td>OAuthException</td>
        </tr>
        <tr>
            <th></td>
            <td>IOException</td>
        </tr>
        <tr>
            <th>ServiceException</td>
            <td></td>
        </tr>
        <tr>
            <th><a href="http://download.oracle.com/javase/6/docs/api/index.html?java/io/IOException.html">IOException</a></td>
            <td></td>
        </tr>
        <tr>
            <th>OAuthException</td>
            <td></td>
        </tr>
      </table>
  </div>

    </div>
</div>





<!-- ========= MESSAGE SOURCES DETAIL ======== -->
<!-- Message Processors -->




<!-- ========= END OF CLASS DATA ========= -->
<A NAME="navbar_top"></A>

<div id="footer">
Generated by <a href="http://www.mulesoft.com/devkit">Mule DevKit</a>. Document generation technology based on <a href="http://code.google.com/p/doclava/">Google's Doclava</a>.
</div> <!-- end footer -->

</div> <!-- jd-content -->

</div><!-- end doc-content -->

</div> <!-- end body-content --> 

<script type="text/javascript">
init(); /* initialize mule-developer-docs.js */
</script>

</body>
</html>
